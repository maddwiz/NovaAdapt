FROM python:3.12-slim

WORKDIR /app

COPY pyproject.toml README.md ./
COPY core ./core
COPY shared ./shared
COPY config ./config

RUN pip install --no-cache-dir --upgrade pip \
    && pip install --no-cache-dir .

ENV PYTHONUNBUFFERED=1
ENV NOVAADAPT_MODEL_CONFIG=/app/config/models.example.json

EXPOSE 8787

CMD ["novaadapt", "serve", "--host", "0.0.0.0", "--port", "8787", "--log-requests"]
